<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <title>Capture-the-flag by janosgyerik</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>Capture-the-flag</h1>
        <h2>Remaster Linux Live CD images for the purpose of creating ready to use security wargames with pre-installed vulnerabilities to exploit.</h2>

        <section id="downloads">
          <a href="https://github.com/janosgyerik/capture-the-flag/zipball/master" class="btn">Download as .zip</a>
          <a href="https://github.com/janosgyerik/capture-the-flag/tarball/master" class="btn">Download as .tar.gz</a>
          <a href="https://github.com/janosgyerik/capture-the-flag" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <h1>
<a name="capture-the-flag" class="anchor" href="#capture-the-flag"><span class="octicon octicon-link"></span></a>Capture the flag!</h1>

<p>Remaster Linux Live CD images for the purpose of creating ready to
use security wargames with pre-installed vulnerabilities to exploit.</p>

<h2>
<a name="requirements" class="anchor" href="#requirements"><span class="octicon octicon-link"></span></a>Requirements</h2>

<p>You will need the following in order to build the Live CD using
the scripts in this project:</p>

<ul>
<li>Linux, with root access using <code>sudo</code>
</li>
<li><code>git</code></li>
<li>
<code>make</code>, <code>gcc</code> -- for building vulnerable programs</li>
<li>
<code>pwgen</code> -- for generating random passwords</li>
<li><code>rsync</code></li>
<li>
<code>genisoimage</code> -- for <code>mkisofs</code>
</li>
<li>
<code>advancecomp</code> -- for <code>advdef</code>
</li>
<li>
<code>squashfs-tools</code> -- for <code>unsquashfs</code>
</li>
<li>
<code>curl</code> -- for downloading packages and other files</li>
</ul><h2>
<a name="requirements-when-building-in-64-bit-systems" class="anchor" href="#requirements-when-building-in-64-bit-systems"><span class="octicon octicon-link"></span></a>Requirements when building in 64-bit systems</h2>

<p>The base Live CD is 32-bit, and therefore the C programs
must be built 32-bit too. In order to do that you need
to install 32-bit development libraries. In Debian for
example the package is called <code>libc6-dev-i386</code>.</p>

<h2>
<a name="building-the-live-cd" class="anchor" href="#building-the-live-cd"><span class="octicon octicon-link"></span></a>Building the Live CD</h2>

<p>You have different options to build the CD:</p>

<ul>
<li>Basic build: using a single script to build everything</li>
<li>3-step build: 3 steps to give you a chance to customize</li>
<li>Expert build: if you want to understand everything</li>
</ul><p>Choose whichever method is most suitable for you.</p>

<h2>
<a name="basic-build-for-the-impatient" class="anchor" href="#basic-build-for-the-impatient"><span class="octicon octicon-link"></span></a>Basic build (for the impatient)</h2>

<p>To fetch all the necessary files including the 8MB TinyCore base
base image, the hacking contest data and all the required TinyCore
packages and remaster the CD:</p>

<pre><code>./scripts/rebuild.sh
</code></pre>

<p>Note: some of the steps need to run <code>sudo</code>, so you will be prompted
for your password one or more times.</p>

<h2>
<a name="3-step-build" class="anchor" href="#3-step-build"><span class="octicon octicon-link"></span></a>3-step build</h2>

<p>The idea of this build method is to create the basic CD data but stop
before rebuilding the image so that you can customize it first.</p>

<ol>
<li>
<p>Build the basic CD data:</p>

<pre><code>./scripts/build.sh
</code></pre>

<p>Note: some of the steps need to run <code>sudo</code>, so you will be
prompted for your password one or more times.</p>
</li>
<li>
<p>Customize the contents in the <code>extract</code> directory. This step is
completely up to you, depending on what you want to customize.
You might want to install some custom packages, for example
keymaps for non US keyboards:</p>

<pre><code>sudo ./scripts/install-tcz.sh kmaps
</code></pre>
</li>
<li>
<p>Create the final ISO:</p>

<pre><code>sudo ./scripts/pack-iso.sh
</code></pre>
</li>
</ol><h2>
<a name="disclaimer" class="anchor" href="#disclaimer"><span class="octicon octicon-link"></span></a>Disclaimer</h2>

<p>The challenges are based on the original online contest
organized by Stripe:
<a href="https://stripe.com/blog/capture-the-flag">https://stripe.com/blog/capture-the-flag</a></p>

<h2>
<a name="how-to-use-the-cd" class="anchor" href="#how-to-use-the-cd"><span class="octicon octicon-link"></span></a>How to use the CD</h2>

<p>The easiest way to use is with a software like VirtualBox,
for example by following these steps:</p>

<ol>
<li>Create a new virtual machine: Linux, 2.6 kernel</li>
<li>Memory: 256MB</li>
<li>Hard disk: no need for a disk</li>
<li>CD: configure the virtual machine to use the ISO image
of the Live CD as a CD drive</li>
<li>Start the Virtual Machine</li>
</ol><p>At the boot prompt, you may want to enter <code>fr</code>, <code>jp</code> or <code>hu</code>
to use French, Japanese or Hungarian keymap, respectively.</p>

<p>All the regular boot options of TinyCore should work as well.</p>

<p>After the system has started, you will be presented the
instructions to pass the first challenge.</p>

<p>To install additional software in the running system,
switch to the <code>tc</code> user with the <code>su - tc</code> command, and
use the <code>tce</code> program -- TinyCore's package manager.
It is not complicated, just follow the instructions.</p>

<h2>
<a name="screenshots" class="anchor" href="#screenshots"><span class="octicon octicon-link"></span></a>Screenshots</h2>

<p><img src="https://github.com/janosgyerik/capture-the-flag/raw/master/images/start.png" alt="Start"><img src="https://github.com/janosgyerik/capture-the-flag/raw/master/images/end.png" alt="End"></p>

<h2>
<a name="solutions" class="anchor" href="#solutions"><span class="octicon octicon-link"></span></a>Solutions</h2>

<p>The solutions are intentionally omitted from this project.
You may find the solutions to the original Stripe challenges,
but don't be surprised if they don't work on this Live CD
out of the box. That is intentional too ;-)</p>

<p>Please keep your own solutions private.</p>

<h2>
<a name="abusing-the-cd" class="anchor" href="#abusing-the-cd"><span class="octicon octicon-link"></span></a>Abusing the CD</h2>

<p>If you want to get root access in the live system, you can
either do <code>su - tc</code> to become the admin user, or boot the
system with the <code>mc superuser</code> standard TinyCore boot option.</p>

<h2>
<a name="links" class="anchor" href="#links"><span class="octicon octicon-link"></span></a>Links</h2>

<ul>
<li><a href="https://stripe.com/blog/capture-the-flag">https://stripe.com/blog/capture-the-flag</a></li>
<li><a href="https://stripe.com/blog/capture-the-flag-20">https://stripe.com/blog/capture-the-flag-20</a></li>
<li><a href="http://io.smashthestack.org:84/">http://io.smashthestack.org:84/</a></li>
<li><a href="http://patorjk.com/software/taag/#p=testall&amp;f=Graffiti&amp;t=CTF">http://patorjk.com/software/taag/#p=testall&amp;f=Graffiti&amp;t=CTF</a></li>
</ul><h2>
<a name="todo" class="anchor" href="#todo"><span class="octicon octicon-link"></span></a>Todo</h2>

<ul>
<li><p>Re-implement /levels/level02/level02.py without flask (save 3MB)</p></li>
<li><p>Implement the second Capture The Flag contest of Stripe</p></li>
<li><p>maybe: Generalize the scripts to use with other than TinyCore</p></li>
</ul>
      </section>
    </div>

    
  </body>
</html>